# 光復 e 互助平台 - 產品需求文件 (PRD)

**文件版本**: v1.0
**建立日期**: 2025-10-03_00:36:04
**最後更新**: 2025-10-03_00:36:04

---

## 📋 目錄

1. [專案概述](#專案概述)
2. [使用者角色與權限](#使用者角色與權限)
3. [核心功能需求](#核心功能需求)
4. [使用者故事](#使用者故事)
5. [功能優先級](#功能優先級)
6. [非功能性需求](#非功能性需求)
7. [第一階段 MVP 範圍](#第一階段-mvp-範圍)

---

## 專案概述

### 產品願景
光復 e 互助平台是一個專為花蓮光復鄉災害應變設計的數位互助平台，透過高效、可靠的數位平台優化災害應變流程。平台將複雜的物資需求與緊急通報系統整合簡化，確保在極端條件下，救援資訊的傳遞零延誤、高效率。

### 核心價值主張
- ✅ **即時媒合**: 快速連結需求者與志工
- ✅ **透明管理**: 任務狀態即時追蹤與更新
- ✅ **權限分級**: 不同角色擁有對應權限
- ✅ **高效協作**: 簡化災害應變流程

---

## 使用者角色與權限

### 角色定義

| 角色代碼 | 角色名稱 | 說明 |
|---------|---------|------|
| `admin` | 系統管理員 | 最高權限，負責平台整體管理與審核 |
| `victim` | 受災戶 | 提出需求的受災民眾 |
| `official_org` | 官方組織 | 政府機關或官方認證組織 |
| `unofficial_org` | 非官方組織 | NGO、民間團體等 |
| `supply_manager` | 物資管理員 | 負責物資庫存與配送管理 |
| `volunteer` | 志工 | 認領任務並執行的志願者 |

### 權限矩陣

#### 任務管理權限

| 功能 | admin | victim | official_org | unofficial_org | supply_manager | volunteer |
|-----|-------|--------|--------------|----------------|----------------|-----------|
| 建立任務 | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ |
| 審核任務 | ✅ | ❌ | ✅ | ❌ | ❌ | ❌ |
| 認領任務 | ✅ | ❌ | ✅ | ✅ | ✅ | ✅ |
| 編輯自己的任務 | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ |
| 更新任務狀態 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| 查看所有任務 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |

#### 使用者管理權限

| 功能 | admin | 其他角色 |
|-----|-------|---------|
| 查看所有使用者 | ✅ | ❌ |
| 更新使用者角色 | ✅ | ❌ |
| 審核使用者 | ✅ | ❌ |
| 審核組織申請 | ✅ | ❌ |

---

## 核心功能需求

### 1. 使用者認證與授權

#### 1.1 註冊功能
- **FR-1.1.1**: 使用者可透過 Email + 密碼註冊
- **FR-1.1.2**: 註冊時需選擇角色 (victim, volunteer, official_org, unofficial_org, supply_manager)
- **FR-1.1.3**: 組織角色需填寫組織資訊 (名稱、類型、聯絡人等)
- **FR-1.1.4**: 組織註冊後需經管理員審核才能啟用

#### 1.2 登入功能
- **FR-1.2.1**: 使用 Email + 密碼登入
- **FR-1.2.2**: 登入成功後取得 JWT Token
- **FR-1.2.3**: Token 用於後續 API 請求認證

#### 1.3 個人資料管理
- **FR-1.3.1**: 使用者可查看個人資料
- **FR-1.3.2**: 使用者可更新姓名、手機號碼
- **FR-1.3.3**: 使用者可修改密碼

### 2. 任務管理系統

#### 2.1 任務建立
- **FR-2.1.1**: 需求者可建立任務 (受災戶、組織、物資管理員)
- **FR-2.1.2**: 任務包含以下資訊:
  - 任務標題
  - 任務描述
  - 任務類型 (清理/救援/物資配送/醫療支援/收容支援)
  - 地點資訊 (地址、座標、詳細說明)
  - 需要志工人數
  - 所需技能 (選填)
  - 截止時間 (選填)
  - 優先級 (1-5)

#### 2.2 任務審核
- **FR-2.2.1**: 任務建立後狀態為 `pending` (待審核)
- **FR-2.2.2**: 管理員和官方組織可審核任務
- **FR-2.2.3**: 審核通過後狀態變更為 `available` (可認領)
- **FR-2.2.4**: 審核流程需記錄審核者與審核時間

#### 2.3 任務認領
- **FR-2.3.1**: 志工可認領狀態為 `available` 的任務
- **FR-2.3.2**: 任務有認領人數上限 (required_volunteers)
- **FR-2.3.3**: 認領後任務狀態變更為 `claimed` (已認領)
- **FR-2.3.4**: 所有志工認領後可開始執行 (狀態變為 `in_progress`)

#### 2.4 任務執行與完成
- **FR-2.4.1**: 認領者可更新任務進度
- **FR-2.4.2**: 任務完成後狀態變更為 `completed`
- **FR-2.4.3**: 任務可被取消 (狀態變為 `cancelled`)

#### 2.5 任務查詢與篩選
- **FR-2.5.1**: 使用者可查看所有任務列表
- **FR-2.5.2**: 可依任務類型篩選
- **FR-2.5.3**: 可依任務狀態篩選
- **FR-2.5.4**: 可依地點篩選
- **FR-2.5.5**: 可依優先級排序
- **FR-2.5.6**: 可搜尋任務標題

### 3. 組織管理

#### 3.1 組織申請
- **FR-3.1.1**: 使用者可提交組織申請
- **FR-3.1.2**: 需提供組織名稱、類型、聯絡資訊、地址、描述
- **FR-3.1.3**: 組織類型包含: 官方組織、非官方組織

#### 3.2 組織審核
- **FR-3.2.1**: 管理員可查看待審核組織列表
- **FR-3.2.2**: 管理員可審核通過或拒絕組織申請
- **FR-3.2.3**: 拒絕需提供拒絕原因
- **FR-3.2.4**: 組織可重新提交申請

### 4. 通知系統 (未來階段)
- **FR-4.1.1**: 任務狀態變更時通知相關人員
- **FR-4.2.1**: 組織審核結果通知申請人
- **FR-4.3.1**: 緊急任務推播通知

---

## 使用者故事

### 受災戶視角
```
作為一個受災戶，
我想要在平台上提出救援需求，
以便能夠獲得志工的及時幫助。

驗收條件:
- 可以填寫任務標題、描述、地點
- 可以選擇任務類型 (清理/救援/物資配送等)
- 可以設定需要的志工人數
- 提交後任務進入待審核狀態
```

### 志工視角
```
作為一個志工，
我想要看到可認領的任務列表，
以便選擇我能力範圍內的任務去協助。

驗收條件:
- 可以查看所有可認領的任務
- 可以依地點、類型篩選任務
- 可以看到任務詳細資訊 (地點、需求人數、優先級)
- 可以認領任務
```

### 管理員視角
```
作為一個管理員，
我想要審核新建立的任務，
以便確保任務的真實性與合理性。

驗收條件:
- 可以查看待審核任務列表
- 可以查看任務詳細資訊
- 可以通過或拒絕任務
- 通過後任務變為可認領狀態
```

---

## 功能優先級

### P0 (第一階段 MVP - 必須完成)
- ✅ 使用者註冊與登入
- ✅ 任務建立功能
- ✅ 任務列表與查看
- ✅ 任務認領功能
- ✅ 基礎任務狀態管理

### P1 (第二階段)
- 🔄 任務審核流程
- 🔄 組織管理與審核
- 🔄 進階任務篩選與搜尋
- 🔄 使用者權限細化

### P2 (第三階段)
- 📅 通知推播系統
- 📅 任務進度追蹤與報告
- 📅 物資庫存管理
- 📅 數據統計與儀表板

### P3 (未來規劃)
- 💡 地圖視覺化
- 💡 即時聊天功能
- 💡 多語系支援
- 💡 行動 App

---

## 非功能性需求

### 效能需求
- **NFR-1**: 頁面載入時間 < 3 秒
- **NFR-2**: API 回應時間 < 500ms (95th percentile)
- **NFR-3**: 支援同時 1000+ 使用者在線

### 安全性需求
- **NFR-4**: 使用 HTTPS 加密傳輸
- **NFR-5**: JWT Token 有效期限 24 小時
- **NFR-6**: 密碼需加密儲存
- **NFR-7**: API 需進行身份驗證與授權檢查

### 可用性需求
- **NFR-8**: 系統可用性 > 99.5%
- **NFR-9**: 支援 RWD 響應式設計
- **NFR-10**: 支援主流瀏覽器 (Chrome, Safari, Firefox, Edge)

### 可維護性需求
- **NFR-11**: 程式碼需有型別檢查 (TypeScript)
- **NFR-12**: 遵循 DRY 原則
- **NFR-13**: 需有完整的 API 文件

---

## 第一階段 MVP 範圍

### 目標
快速建立可運作的互助媒合平台，讓需求者能發布需求、志工能認領任務。

### 包含功能
1. ✅ **使用者系統**
   - Email 註冊/登入
   - 基礎角色選擇 (受災戶/志工)
   - 個人資料管理

2. ✅ **任務系統**
   - 任務建立 (標題、描述、類型、地點、人數、優先級)
   - 任務列表展示
   - 任務詳情查看
   - 任務認領
   - 基礎狀態流轉 (pending → available → claimed → in_progress → completed)

3. ✅ **基礎介面**
   - 登入頁面
   - 任務列表頁面 (含篩選)
   - 任務詳情頁面
   - 響應式設計

### 不包含功能 (延後至後續階段)
- ❌ 任務審核流程
- ❌ 組織管理
- ❌ 通知系統
- ❌ 物資管理
- ❌ 進階數據統計

### 成功指標
- 使用者可以在 5 分鐘內完成註冊並發布第一個任務
- 志工可以在 3 分鐘內找到並認領適合的任務
- 任務列表載入時間 < 2 秒
- 系統穩定運行無重大 Bug

---

## 附錄

### 任務類型說明

| 任務類型 | 代碼 | 說明 | 範例 |
|---------|------|------|------|
| 環境清理 | `cleanup` | 災後清理、垃圾清運等 | 清理倒塌房屋瓦礫 |
| 緊急救援 | `rescue` | 人員搜救、緊急撤離等 | 受困民眾救援 |
| 物資配送 | `supply_delivery` | 物資運送、發放等 | 配送飲用水與食物 |
| 醫療支援 | `medical_aid` | 醫療協助、傷患照護等 | 臨時醫療站支援 |
| 收容支援 | `shelter_support` | 收容所管理、民眾安置等 | 收容所志工服務 |

### 任務狀態流程圖

```
pending (待審核)
    ↓ [審核通過]
available (可認領)
    ↓ [志工認領]
claimed (已認領)
    ↓ [開始執行]
in_progress (進行中)
    ↓ [完成]
completed (已完成)

任何狀態 → cancelled (已取消)
```

---

**文件結束**
